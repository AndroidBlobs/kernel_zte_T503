/*****************************************************************************
*
* Filename:
* ---------
*   syv697.h
*
* Project:
* --------
*   Android
*
* Description:
* ------------
*   syv697 header file
*
* Author:
* -------
*
****************************************************************************/

#ifndef _syv697_SW_H_
#define _syv697_SW_H_

/* Register 00h */
#define SYV697_REG_00			0x00
#define SYV_REG00_ENHIZ_MASK		GENMASK(7, 7)
#define SYV_REG00_ENHIZ_SHIFT		7
#define	SYV_REG00_HIZ_ENABLE		1
#define	SYV_REG00_HIZ_DISABLE		0

#define	SYV_REG00_VINDPM_MASK		GENMASK(6, 3)
#define SYV_REG00_VINDPM_SHIFT		3
#define SYV_REG00_VINDPM_BASE		3880
#define	SYV_REG00_VINDPM_LSB		80

#define SYV_REG00_IINLIM_MASK		GENMASK(2, 0)
#define SYV_REG00_IINLIM_SHIFT		0
#define	SYV_REG00_IINLIM_LSB		100
#define	SYV_REG00_IINLIM_BASE		100

/* Register 01h */
#define SYV697_REG_01			0x01
#define	SYV_REG01_RESET_MASK		GENMASK(7, 7)
#define	SYV_REG01_RESET_SHIFT		7
#define	SYV_REG01_RESET			1

#define SYV_REG01_WDT_RESET_MASK		GENMASK(6, 6)
#define SYV_REG01_WDT_RESET_SHIFT		6
#define SYV_REG01_WDT_RESET			1

#define	SYV_REG01_OTG_CONFIG_MASK		GENMASK(5, 4)
#define	SYV_REG01_OTG_CONFIG_SHIFT		4
#define	SYV_REG01_OTG_ENABLE		2
#define	SYV_REG01_OTG_DISABLE		1

#define SYV_REG01_CHG_CONFIG_MASK		GENMASK(5, 4)
#define SYV_REG01_CHG_CONFIG_SHIFT		4
#define SYV_REG01_CHG_DISABLE		0
#define SYV_REG01_CHG_ENABLE		1

#define SYV_REG01_SYS_MINV_MASK		GENMASK(3, 1)
#define SYV_REG01_SYS_MINV_SHIFT		1

#define	SYV_REG01_MIN_VBAT_SEL_MASK		GENMASK(0, 0)
#define	SYV_REG01_MIN_VBAT_SEL_SHIFT	0
#define	SYV_REG01_MIN_VBAT_2P8V		0
#define	SYV_REG01_MIN_VBAT_2P5V		1

/* Register 0x02*/
#define SYV697_REG_02			0x02
#define	SYV_REG02_BOOST_LIM_MASK		GENMASK(7, 7)
#define	SYV_REG02_BOOST_LIM_SHIFT		7
#define	SYV_REG02_BOOST_LIM_0P5A		0
#define	SYV_REG02_BOOST_LIM_1P2A		1

#define	SYV_REG02_Q1_FULLON_MASK		GENMASK(6, 6)
#define	SYV_REG02_Q1_FULLON_SHIFT		6
#define	SYV_REG02_Q1_FULLON_ENABLE		1
#define	SYV_REG02_Q1_FULLON_DISABLE		0

#define SYV_REG02_ICHG_MASK			GENMASK(7, 2)
#define SYV_REG02_ICHG_SHIFT		2
#define SYV_REG02_ICHG_BASE			512
#define SYV_REG02_ICHG_LSB			64

/* Register 0x03*/
#define SYV697_REG_03			0x03
#define SYV_REG03_IPRECHG_MASK		GENMASK(7, 4)
#define SYV_REG03_IPRECHG_SHIFT		4
#define SYV_REG03_IPRECHG_BASE		128
#define SYV_REG03_IPRECHG_LSB		128

#define SYV_REG03_ITERM_MASK		GENMASK(3, 0)
#define SYV_REG03_ITERM_SHIFT		0
#define SYV_REG03_ITERM_BASE		128
#define SYV_REG03_ITERM_LSB			128

/* Register 0x04*/
#define SYV697_REG_04			0x04
#define SYV_REG04_VREG_MASK			GENMASK(7, 2)
#define SYV_REG04_VREG_SHIFT		2
#define SYV_REG04_VREG_BASE			3504
#define SYV_REG04_VREG_MAX			4400
#define SYV_REG04_VREG_LSB			16

#define	SYV_REG04_TOPOFF_TIMER_MASK		GENMASK(2, 1)
#define	SYV_REG04_TOPOFF_TIMER_SHIFT	1
#define	SYV_REG04_TOPOFF_TIMER_DISABLE	0
#define	SYV_REG04_TOPOFF_TIMER_15M		1
#define	SYV_REG04_TOPOFF_TIMER_30M		2
#define	SYV_REG04_TOPOFF_TIMER_45M		3

#define SYV_REG04_VRECHG_MASK		GENMASK(0, 0)
#define SYV_REG04_VRECHG_SHIFT		0
#define SYV_REG04_VRECHG_100MV		0
#define SYV_REG04_VRECHG_200MV		1

/* Register 0x05*/
#define SYV697_REG_05			0x05
#define SYV_REG05_EN_TERM_MASK		GENMASK(7, 7)
#define SYV_REG05_EN_TERM_SHIFT		7
#define SYV_REG05_TERM_ENABLE		1
#define SYV_REG05_TERM_DISABLE		0

#define SYV_REG05_WDT_MASK			GENMASK(5, 4)
#define SYV_REG05_WDT_SHIFT			4
#define SYV_REG05_WDT_DISABLE		0
#define SYV_REG05_WDT_40S			1
#define SYV_REG05_WDT_80S			2
#define SYV_REG05_WDT_160S			3
#define SYV_REG05_WDT_BASE			0
#define SYV_REG05_WDT_LSB			40

#define SYV_REG05_EN_TIMER_MASK		GENMASK(3, 3)
#define SYV_REG05_EN_TIMER_SHIFT		3
#define SYV_REG05_CHG_TIMER_ENABLE		1
#define SYV_REG05_CHG_TIMER_DISABLE		0

#define SYV_REG05_CHG_TIMER_MASK		GENMASK(2, 2)
#define SYV_REG05_CHG_TIMER_SHIFT		2
#define SYV_REG05_CHG_TIMER_5HOURS		0
#define SYV_REG05_CHG_TIMER_10HOURS		1

#define	SYV_REG05_TREG_MASK			GENMASK(1, 1)
#define	SYV_REG05_TREG_SHIFT		1
#define	SYV_REG05_TREG_90C			0
#define	SYV_REG05_TREG_110C			1

#define SYV_REG05_JEITA_ISET_MASK		GENMASK(0, 0)
#define SYV_REG05_JEITA_ISET_SHIFT		0
#define SYV_REG05_JEITA_ISET_50PCT		0
#define SYV_REG05_JEITA_ISET_20PCT		1

/* Register 0x06*/
#define SYV697_REG_06			0x06
#define	SYV_REG06_OVP_MASK			GENMASK(7, 6)
#define	SYV_REG06_OVP_SHIFT			0x6
#define	SYV_REG06_OVP_5P5V			0
#define	SYV_REG06_OVP_6P2V			1
#define	SYV_REG06_OVP_10P5V			2
#define	SYV_REG06_OVP_14P3V			3

#define	SYV_REG06_BOOSTV_MASK		GENMASK(5, 4)
#define	SYV_REG06_BOOSTV_SHIFT		4
#define	SYV_REG06_BOOSTV_4P85V		0
#define	SYV_REG06_BOOSTV_5V			1
#define	SYV_REG06_BOOSTV_5P15V		2
#define	SYV_REG06_BOOSTV_5P3V		3

#define	SYV_REG06_VINDPM_MASK		GENMASK(3, 0)
#define	SYV_REG06_VINDPM_SHIFT		0
#define	SYV_REG06_VINDPM_BASE		3900
#define	SYV_REG06_VINDPM_LSB		100

/* Register 0x07*/
#define SYV697_REG_07			0x07
#define SYV_REG07_FORCE_DPDM_MASK		GENMASK(7, 7)
#define SYV_REG07_FORCE_DPDM_SHIFT		7
#define SYV_REG07_FORCE_DPDM		1

#define SYV_REG07_TMR2X_EN_MASK		GENMASK(6, 6)
#define SYV_REG07_TMR2X_EN_SHIFT		6
#define SYV_REG07_TMR2X_ENABLE		1
#define SYV_REG07_TMR2X_DISABLE		0

#define SYV_REG07_BATFET_DIS_MASK		GENMASK(5, 5)
#define SYV_REG07_BATFET_DIS_SHIFT		5
#define SYV_REG07_BATFET_OFF		1
#define SYV_REG07_BATFET_ON			0

#define SYV_REG07_JEITA_VSET_MASK		GENMASK(4, 4)
#define SYV_REG07_JEITA_VSET_SHIFT		4
#define SYV_REG07_JEITA_VSET_4100		0
#define SYV_REG07_JEITA_VSET_VREG		1

#define	SYV_REG07_BATFET_DLY_MASK		GENMASK(3, 3)
#define	SYV_REG07_BATFET_DLY_SHIFT		3
#define	SYV_REG07_BATFET_DLY_0S		0
#define	SYV_REG07_BATFET_DLY_10S		1

#define	SYV_REG07_BATFET_RST_EN_MASK	GENMASK(2, 2)
#define	SYV_REG07_BATFET_RST_EN_SHIFT	2
#define	SYV_REG07_BATFET_RST_DISABLE	0
#define	SYV_REG07_BATFET_RST_ENABLE		1

#define	SYV_REG07_VDPM_BAT_TRACK_MASK	GENMASK(1, 0)
#define	SYV_REG07_VDPM_BAT_TRACK_SHIFT	0
#define	SYV_REG07_VDPM_BAT_TRACK_DISABLE	0
#define	SYV_REG07_VDPM_BAT_TRACK_200MV	1
#define	SYV_REG07_VDPM_BAT_TRACK_250MV	2
#define	SYV_REG07_VDPM_BAT_TRACK_300MV	3

/* Register 0x08*/
#define SYV697_REG_08			0x08
#define SYV_REG08_VBUS_STAT_MASK		GENMASK(7, 5)
#define SYV_REG08_VBUS_STAT_SHIFT		5
#define SYV_REG08_VBUS_TYPE_NONE		0
#define SYV_REG08_VBUS_TYPE_USB		1
#define SYV_REG08_VBUS_TYPE_ADAPTER		3
#define SYV_REG08_VBUS_TYPE_OTG		7

#define SYV_REG08_CHRG_STAT_MASK		GENMASK(5, 4)
#define SYV_REG08_CHRG_STAT_SHIFT		4
#define SYV_REG08_CHRG_STAT_IDLE		0
#define SYV_REG08_CHRG_STAT_PRECHG		1
#define SYV_REG08_CHRG_STAT_FASTCHG		2
#define SYV_REG08_CHRG_STAT_CHGDONE		3

#define SYV_REG08_PG_STAT_MASK		GENMASK(2, 2)
#define SYV_REG08_PG_STAT_SHIFT		2
#define SYV_REG08_POWER_GOOD		1

#define SYV_REG08_THERM_STAT_MASK		GENMASK(1, 1)
#define SYV_REG08_THERM_STAT_SHIFT		1

#define SYV_REG08_VSYS_STAT_MASK		GENMASK(0, 0)
#define SYV_REG08_VSYS_STAT_SHIFT		0
#define SYV_REG08_IN_VSYS_STAT		1

/* Register 0x09*/
#define SYV697_REG_09			0x09
#define SYV_REG09_FAULT_WDT_MASK		GENMASK(7, 7)
#define SYV_REG09_FAULT_WDT_SHIFT		7
#define SYV_REG09_FAULT_WDT			1

#define SYV_REG09_FAULT_BOOST_MASK		GENMASK(6, 6)
#define SYV_REG09_FAULT_BOOST_SHIFT		6
#define SYV_REG09_FAULT_BOOT		1

#define SYV_REG09_FAULT_CHRG_MASK		GENMASK(5, 4)
#define SYV_REG09_FAULT_CHRG_SHIFT		4
#define SYV_REG09_FAULT_CHRG_NORMAL		0
#define SYV_REG09_FAULT_CHRG_INPUT		1
#define SYV_REG09_FAULT_CHRG_THERMAL	2
#define SYV_REG09_FAULT_CHRG_TIMER		3

#define SYV_REG09_FAULT_BAT_MASK		GENMASK(3, 3)
#define SYV_REG09_FAULT_BAT_SHIFT		3
#define	SYV_REG09_FAULT_BAT_OVP		1

#define SYV_REG09_FAULT_NTC_MASK		GENMASK(2, 0)
#define SYV_REG09_FAULT_NTC_SHIFT		0
#define	SYV_REG09_FAULT_NTC_NORMAL		0
#define SYV_REG09_FAULT_NTC_COLD		5
#define SYV_REG09_FAULT_NTC_HOT		6

/* Register 0x0A */
#define SYV697_REG_0A			0x0a
#define	SYV_REG0A_PN_MASK		GENMASK(5, 3)
#define	SYV_REG0A_PN_SHIFT		3
#define SYV_REG0A_PN_SYV697		5

#define	SYV_REG0A_DEV_MASK		GENMASK(1, 0)
#define	SYV_REG0A_DEV_SHIFT		0
#define SYV_REG0A_DEV_SYV697	3

struct syv697 {
	struct i2c_client *client;
	struct gpio_desc *vbus_detect;
	struct delayed_work feed_watchdog_work;
	struct delayed_work vbus_detect_work;
};

extern void syv697_reset_timer(void);
extern void syv697_sw_reset(void);
extern void syv697_set_vindpm(u8 reg_val);
extern void syv697_termina_cur_set(u8 reg_val);
extern void syv697_termina_vol_set(u8 reg_val);
extern void syv697_init(void);
extern void syv697_otg_enable(int enable);
extern void syv697_stop_charging(u32 flag);
extern u8 syv697_get_sys_status(void);
extern u8 syv697_get_fault_val(void);
extern u8 syv697_get_chgcur(void);
extern void syv697_enable_chg(void);
extern void syv697_set_chg_current_limit(u32 limit);
extern void syv697_set_chg_current(u8 reg_val);
extern void syv697_set_ship_mode(void);
extern int syv697_get_ship_mode(void);
extern int syv697_get_charge_status(void);

#endif /*_syv697_SW_H_ */

